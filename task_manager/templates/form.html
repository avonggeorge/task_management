{% extends "base.html" %}
{% block title %}Todos{% endblock %}


{% block content %}

    <script>
        function addRow() {
            // Get input values
            var item = document.getElementById("item").value;
            var description = document.getElementById("description").value;
            var location = document.getElementById("location").value;
            var date = document.getElementById("date").value;
            var status = document.getElementById("status").value;
            var note = document.getElementById("note").value;

            // Create a new row
            var table = document.getElementById("dataTable");
            var newRow = table.insertRow();

            // Insert cells and set their values
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            var cell4 = newRow.insertCell(3);
            var cell5 = newRow.insertCell(4);
            var cell6 = newRow.insertCell(5);
            var cell7 = newRow.insertCell(6); // Action cell

            cell1.innerHTML = item;
            cell2.innerHTML = description;
            cell3.innerHTML = location;
            cell4.innerHTML = date;
            cell5.innerHTML = status;
            cell6.innerHTML = note;

            // Create Update Button
            var updateButton = document.createElement("button");
            updateButton.innerHTML = "Update";
            updateButton.onclick = function() {
                updateRow(newRow);
            };
            cell7.appendChild(updateButton);

            // Create Delete Button
            var deleteButton = document.createElement("button");
            deleteButton.innerHTML = "Delete";
            deleteButton.onclick = function() {
                deleteRow(newRow);
            };
            cell7.appendChild(deleteButton);

            // Clear input fields
            document.getElementById("item").value = "";
            document.getElementById("description").value = "";
            document.getElementById("location").value = "";
            document.getElementById("date").value = "";
            document.getElementById("status").value = "";
            document.getElementById("note").value = "";
        }

        function deleteRow(row) {
            // Remove the row from the table
            row.parentNode.removeChild(row);
        }

        function updateRow(row) {
            // Get current values
            var cells = row.getElementsByTagName("td");
            var item = cells[0].innerHTML;
            var description = cells[1].innerHTML;
            var location = cells[2].innerHTML;
            var date = cells[3].innerHTML;
            var status = cells[4].innerHTML;
            var note = cells[5].innerHTML;

            // Prompt user for new values
            var newItem = prompt("Update Item Name:", item);
            var newDescription = prompt("Update Description:", description);
            var newLocation = prompt("Update Location:", location);
            var newDate = prompt("Update Date:", date);
            var newStatus = prompt("Update Status:", status);
            var newNote = prompt("Update Note:", note);

            // Update the cells with new values
            if (newItem !== null) cells[0].innerHTML = newItem;
            if (newDescription !== null) cells[1].innerHTML = newDescription;
            if (newLocation !== null) cells[2].innerHTML = newLocation;
            if (newDate !== null) cells[3].innerHTML = newDate;
            if (newStatus !== null) cells[4].innerHTML = newStatus;
            if (newNote !== null) cells[5].innerHTML = newNote;
        }
    </script>


<h2>Add a New Task to the Table</h2>
<div>
    <label for="item">Item Name</label>
    <input type="text" id="item" placeholder="Enter item name" required> <br>

    <label for="description">Description</label>
    <input type="text" id="description" placeholder="Enter description" required> <br>

    <label for="location">Location</label>
    <input type="text" id="location" placeholder="Enter location" required> <br>
    
    <label for="date">Due Date</label>
    <input type="date" id="date" placeholder="Due date" required> <br>
    
    <label for="status">Status</label>  <!-- New Status Label -->
    <select id="status">
        <option value="select" selected>Select Status</option>
        <option value="pending">Pending</option>
        <option value="completed">Completed</option>
        <option value="working-on-it">Working on it</option>
    </select> <br>
    
    <label for="note">Note</label> <!-- New Note Label -->
    <input type="text" id="note" placeholder="Write some notes" required> <br>
    
    <button onclick="addRow()">Create Task</button> <br>
</div>

<div class="form">
    <h2>Task List</h2>
    <table>
        <thead>
            <tr>
                <th>Item</th>
                <th>Description</th>
                <th>Location</th>
                <th>Due Date</th>
                <th>Status</th>
                <th>Note</th>
                <th>Action</th> <!-- New Action Header -->
            </tr>
        </thead>
        <tbody id="dataTable">
            <!-- Dynamic rows will be added here -->
        </tbody>
    </table>
</div>
{% endblock %}
